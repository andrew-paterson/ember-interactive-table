{"version":3,"file":"ember-interactive-table.js","sources":["../../src/controllers/ember-interactive-table.js"],"sourcesContent":["import { action } from '@ember/object';\nimport Controller from '@ember/controller';\nimport { tracked } from '@glimmer/tracking';\nexport default class EmberInteractiveTableController extends Controller {\n  @tracked sort;\n  @tracked size;\n  @tracked page;\n\n  @action\n  applyDefaults() {\n    var queryParamsObjects = this.queryParamsObjects || [];\n    if (queryParamsObjects) {\n      queryParamsObjects.forEach((qpObject) => {\n        if (Array.isArray(qpObject.defaultValue)) {\n          qpObject.defaultValue = qpObject.defaultValue.join(',');\n        }\n        this[qpObject.key] = qpObject.defaultValue;\n      });\n      this.queryParams = [\n        ...new Set(\n          (this.queryParams || []).concat(\n            queryParamsObjects.map((item) => {\n              return item.qpKey || item.key;\n            }) || [],\n          ),\n        ),\n      ];\n    }\n  }\n\n  @action\n  setSortParams(newSortField, defaultDirection = 'desc') {\n    // - means desc.\n    var currentSortFieldName = this.sort.replace('-', '');\n    var newSortDirection;\n    if (currentSortFieldName === newSortField) {\n      newSortDirection = this.sort.split('')[0] === '-' ? 'asc' : 'desc';\n    } else {\n      newSortDirection = defaultDirection;\n    }\n    newSortDirection = newSortDirection.replace('desc', '-').replace('asc', '');\n    this.sort = `${newSortDirection}${newSortField}`;\n  }\n\n  @action\n  clearAllFilters() {\n    this.applyDefaults();\n    this.refreshModel();\n  }\n\n  @action\n  applyFilters(filterFormValues) {\n    var queryParamsObjects = this.queryParamsObjects || [];\n    for (var key in filterFormValues) {\n      var value = filterFormValues[key];\n      var thisObject =\n        queryParamsObjects.find(\n          (queryParamsObject) => queryParamsObject.key === key,\n        ) || {};\n      if (thisObject.objectKeyPath) {\n        value = value[thisObject.objectKeyPath];\n      }\n      if (thisObject.arrayObjectKeyPath) {\n        value = (value || [])\n          .map((item) => {\n            return item[thisObject.arrayObjectKeyPath];\n          })\n          .join(',');\n      }\n      value = (value || []).length === 0 ? null : value;\n      this[key] = value;\n    }\n    this.model.meta = {};\n\n    setTimeout(() => {\n      // TODO undesirable\n      this.refreshModel();\n    });\n  }\n}\n"],"names":["EmberInteractiveTableController","Controller","g","prototype","tracked","i","void 0","applyDefaults","queryParamsObjects","forEach","qpObject","Array","isArray","defaultValue","join","key","queryParams","Set","concat","map","item","qpKey","n","action","setSortParams","newSortField","defaultDirection","currentSortFieldName","sort","replace","newSortDirection","split","clearAllFilters","refreshModel","applyFilters","filterFormValues","value","thisObject","find","queryParamsObject","objectKeyPath","arrayObjectKeyPath","length","model","meta","setTimeout"],"mappings":";;;;;AAGe,MAAMA,+BAA+B,SAASC,UAAU,CAAC;AAAA,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,MAAA,EAAA,CACrEC,OAAO,CAAA,CAAA;AAAA;AAAA,EAAA,KAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,MAAA,CAAA,EAAAC,SAAA;AAAA,EAAA;IAAAJ,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,MAAA,EAAA,CACPC,OAAO,CAAA,CAAA;AAAA;AAAA,EAAA,KAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,MAAA,CAAA,EAAAC,SAAA;AAAA,EAAA;IAAAJ,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,MAAA,EAAA,CACPC,OAAO,CAAA,CAAA;AAAA;AAAA,EAAA,KAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,MAAA,CAAA,EAAAC,SAAA;AAGRC,EAAAA,aAAaA,GAAG;AACd,IAAA,IAAIC,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,IAAI,EAAE;AACtD,IAAwB;AACtBA,MAAAA,kBAAkB,CAACC,OAAO,CAAEC,QAAQ,IAAK;QACvC,IAAIC,KAAK,CAACC,OAAO,CAACF,QAAQ,CAACG,YAAY,CAAC,EAAE;UACxCH,QAAQ,CAACG,YAAY,GAAGH,QAAQ,CAACG,YAAY,CAACC,IAAI,CAAC,GAAG,CAAC;AACzD;QACA,IAAI,CAACJ,QAAQ,CAACK,GAAG,CAAC,GAAGL,QAAQ,CAACG,YAAY;AAC5C,OAAC,CAAC;MACF,IAAI,CAACG,WAAW,GAAG,CACjB,GAAG,IAAIC,GAAG,CACR,CAAC,IAAI,CAACD,WAAW,IAAI,EAAE,EAAEE,MAAM,CAC7BV,kBAAkB,CAACW,GAAG,CAAEC,IAAI,IAAK;AAC/B,QAAA,OAAOA,IAAI,CAACC,KAAK,IAAID,IAAI,CAACL,GAAG;AAC/B,OAAC,CAAC,IAAI,EACR,CACF,CAAC,CACF;AACH;AACF;AAAC,EAAA;IAAAO,CAAA,CAAA,IAAA,CAAAnB,SAAA,EAAA,eAAA,EAAA,CApBAoB,MAAM,CAAA,CAAA;AAAA;AAuBPC,EAAAA,aAAaA,CAACC,YAAY,EAAEC,gBAAgB,GAAG,MAAM,EAAE;AACrD;IACA,IAAIC,oBAAoB,GAAG,IAAI,CAACC,IAAI,CAACC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;AACrD,IAAA,IAAIC,gBAAgB;IACpB,IAAIH,oBAAoB,KAAKF,YAAY,EAAE;AACzCK,MAAAA,gBAAgB,GAAG,IAAI,CAACF,IAAI,CAACG,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,KAAK,GAAG,MAAM;AACpE,KAAC,MAAM;AACLD,MAAAA,gBAAgB,GAAGJ,gBAAgB;AACrC;AACAI,IAAAA,gBAAgB,GAAGA,gBAAgB,CAACD,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;AAC3E,IAAA,IAAI,CAACD,IAAI,GAAI,GAAEE,gBAAiB,CAAA,EAAEL,YAAa,CAAC,CAAA;AAClD;AAAC,EAAA;IAAAH,CAAA,CAAA,IAAA,CAAAnB,SAAA,EAAA,eAAA,EAAA,CAZAoB,MAAM,CAAA,CAAA;AAAA;AAePS,EAAAA,eAAeA,GAAG;IAChB,IAAI,CAACzB,aAAa,EAAE;IACpB,IAAI,CAAC0B,YAAY,EAAE;AACrB;AAAC,EAAA;IAAAX,CAAA,CAAA,IAAA,CAAAnB,SAAA,EAAA,iBAAA,EAAA,CAJAoB,MAAM,CAAA,CAAA;AAAA;EAOPW,YAAYA,CAACC,gBAAgB,EAAE;AAC7B,IAAA,IAAI3B,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,IAAI,EAAE;AACtD,IAAA,KAAK,IAAIO,GAAG,IAAIoB,gBAAgB,EAAE;AAChC,MAAA,IAAIC,KAAK,GAAGD,gBAAgB,CAACpB,GAAG,CAAC;AACjC,MAAA,IAAIsB,UAAU,GACZ7B,kBAAkB,CAAC8B,IAAI,CACpBC,iBAAiB,IAAKA,iBAAiB,CAACxB,GAAG,KAAKA,GACnD,CAAC,IAAI,EAAE;MACT,IAAIsB,UAAU,CAACG,aAAa,EAAE;AAC5BJ,QAAAA,KAAK,GAAGA,KAAK,CAACC,UAAU,CAACG,aAAa,CAAC;AACzC;MACA,IAAIH,UAAU,CAACI,kBAAkB,EAAE;QACjCL,KAAK,GAAG,CAACA,KAAK,IAAI,EAAE,EACjBjB,GAAG,CAAEC,IAAI,IAAK;AACb,UAAA,OAAOA,IAAI,CAACiB,UAAU,CAACI,kBAAkB,CAAC;AAC5C,SAAC,CAAC,CACD3B,IAAI,CAAC,GAAG,CAAC;AACd;AACAsB,MAAAA,KAAK,GAAG,CAACA,KAAK,IAAI,EAAE,EAAEM,MAAM,KAAK,CAAC,GAAG,IAAI,GAAGN,KAAK;AACjD,MAAA,IAAI,CAACrB,GAAG,CAAC,GAAGqB,KAAK;AACnB;AACA,IAAA,IAAI,CAACO,KAAK,CAACC,IAAI,GAAG,EAAE;AAEpBC,IAAAA,UAAU,CAAC,MAAM;AACf;MACA,IAAI,CAACZ,YAAY,EAAE;AACrB,KAAC,CAAC;AACJ;AAAC,EAAA;IAAAX,CAAA,CAAA,IAAA,CAAAnB,SAAA,EAAA,cAAA,EAAA,CA5BAoB,MAAM,CAAA,CAAA;AAAA;AA6BT;;;;"}